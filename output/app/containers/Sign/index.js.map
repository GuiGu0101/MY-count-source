{"version":3,"sources":["/app/containers/Sign/index.jsx"],"names":[],"mappings":"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","file":"/app/containers/Sign/index.jsx","sourcesContent":["/**\n * Created by guigu on 2017/8/13.\n */\nimport React, {PropTypes, Component} from 'react'\nimport PureRenderMixin from 'react-addons-pure-render-mixin'\nimport {connect} from 'react-redux';\nimport SignInput from '../../components/Sign/Input';\nimport Success from '../../components/Sign/Success';\nimport * as signCallBack from '../../actions/CallBack/sign';\nimport 'sign.scss';\n\nconst mapStateToProps = state => {\n    return {\n        baseInfo: state.baseInfo,\n    };\n};\n\n// React & Redux 绑定\n@connect(mapStateToProps)\nexport default class Sign extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.shouldComponentUpdate = PureRenderMixin.shouldComponentUpdate.bind(this);\n        this.state = {\n            success: null\n        };\n        this.handleKeyDown = this.handleKeyDown.bind(this);\n    }\n\n    componentWillMount() {\n        console.log(this.props.baseInfo);\n\n    }\n\n    componentDidMount() {\n        console.log(this.props.baseInfo);\n        window.addEventListener('keydown', this.handleKeyDown);\n    }\n    componentWillUnmount(){\n        console.log('unmount')\n        window.removeEventListener('keydown', this.handleKeyDown);\n    }\n\n    handleKeyDown(e) {\n        console.log(e);\n        if (this.state.success && e.which === 13) {\n            this.setState({success: null});\n        }\n    }\n\n    signed(mobile) {\n        const {users} = this.props.baseInfo;\n        for (let i = 0; i < users.length; i++) {\n            if (users[i].mobile === mobile) {\n                users[i].signed = true;\n                break;\n            }\n        }\n    }\n\n    submitSign(mobile) {\n        let success = null;\n        console.log(mobile);\n        signCallBack.login({\n            mobile\n        }).then(res => {\n            if (typeof res.json === 'function') {\n                return res.json();\n            }\n            return res;\n        }).then(data => {\n            console.log(data)\n            if (data.status !== 1) {\n                alert('该号码已签到');\n            } else {\n                success = data.user;\n\n            }\n            this.signed(mobile);\n            this.setState({\n                success\n            });\n        });\n\n    }\n\n\n    render() {\n        return (\n            <div className=\"main_BG sign_main\">\n                <div className=\"title\">重庆魅友家3周年签到系统</div>\n                {!this.state.success ?\n                    <SignInput users={this.props.baseInfo.users} submitSign={this.submitSign.bind(this)}/> :\n                    <Success user={this.state.success}/>\n                }\n                {this.state.success &&\n                <a href=\"javascript:;\" className=\"next\" onClick={e => this.setState({success: null})}>下一个</a>}\n            </div>\n        )\n    }\n}"]}