{"version":3,"sources":["/app/components/Sign/Input.jsx"],"names":[],"mappings":"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","file":"/app/components/Sign/Input.jsx","sourcesContent":["/**\n * Created by guigu on 2017/8/16.\n */\nimport React, {PropTypes, Component} from 'react'\nimport PureRenderMixin from 'react-addons-pure-render-mixin'\n\nexport default class Input extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.shouldComponentUpdate = PureRenderMixin.shouldComponentUpdate.bind(this);\n        this.state = {\n            text: '',\n            match: [],\n            users:[]\n        }\n    }\n\n    componentWillMount() {\n        this.state.users = this.props.users\n    }\n\n    componentDidMount() {\n    }\n\n    componentWillReceiveProps(nextProps){\n        this.state.users = nextProps.users\n    }\n\n    matchMobile(mobile) {\n        const match = [];\n        const {users} = this.state;\n        users.map(user => {\n            if (user.mobile.indexOf(mobile) !== -1 && !user.signed) {\n                match.push({mobile: user.mobile, active: false})\n            }\n        });\n        return match;\n    }\n\n    downActiveMobile() {\n        const {match} = this.state;\n        let hasActive = false;\n        for (let i = 0; i < match.length; i++) {\n            if (match[i].active && i !== (match.length - 1)) {\n                hasActive = true;\n                match[i].active = false;\n                match[i + 1].active = true;\n                break;\n            }\n        }\n        if (!hasActive) {\n            match[0].active = true;\n            match[match.length - 1].active = false;\n        }\n        this.setState({\n            match: [...match]\n        });\n    }\n\n    upActiveMobile() {\n        const {match} = this.state;\n        let hasActive = false;\n        for (let i = 0; i < match.length; i++) {\n            if (match[i].active && i !== 0) {\n                hasActive = true;\n                match[i].active = false;\n                match[i - 1].active = true;\n                break;\n            }\n        }\n        if (!hasActive) {\n            match[match.length - 1].active = true;\n            match[0].active = false;\n        }\n        this.setState({\n            match: [...match]\n        });\n    }\n\n\n    handleChange(e) {\n        console.log(e.target.value);\n        const match = this.matchMobile(e.target.value);\n        this.setState({\n            text: e.target.value,\n            match\n        });\n\n    }\n\n    matchClickHandle(mobile) {\n        this.props.submitSign(mobile);\n    }\n\n    submitSign() {\n        let mobile = '';\n        const {match} = this.state;\n        if (match.length === 0) {\n            alert('号码不存在');\n        } else {\n            for (let i = 0; i < match.length; i++) {\n                if (match[i].active) {\n                    mobile = match[i].mobile;\n                    break;\n                }\n            }\n            if (!mobile) {\n                mobile = match[0].mobile\n            }\n            this.props.submitSign(mobile);\n        }\n    }\n\n    handleSubmit(e) {\n        console.log(e.which)\n        if (e.which === 40) {\n            this.downActiveMobile();\n        } else if (e.which === 38) {\n            this.upActiveMobile();\n        } else if (e.which === 13) {\n            this.submitSign();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"sign\">\n                <input className=\"new-todo\"\n                       type=\"text\"\n                       placeholder=\"请输入手机号\"\n                       autoFocus=\"true\"\n                       value={this.state.text}\n                    // onBlur={this.handleBlur.bind(this)}\n                       onChange={this.handleChange.bind(this)}\n                       onKeyDown={this.handleSubmit.bind(this)}\n                />\n                <div className=\"auto-complete\">\n                    {\n                        this.state.match.map(user => (\n                            <div className={\"auto-complete-item \" + (user.active ? 'active' : '')}\n                                 key={user.mobile}\n                                 onClick={this.matchClickHandle.bind(this, user.mobile)}>\n                                {user.mobile}\n                            </div>\n                        ))\n                    }\n                </div>\n            </div>\n        )\n    }\n}"]}