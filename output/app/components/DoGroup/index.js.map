{"version":3,"sources":["/app/components/DoGroup/index.jsx"],"names":[],"mappings":"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","file":"/app/components/DoGroup/index.jsx","sourcesContent":["/**\n * Created by guigu on 2017/8/14.\n */\nimport React, {PropTypes, Component} from 'react';\nimport PureRenderMixin from 'react-addons-pure-render-mixin';\nimport {\n    CellsTitle,\n    Cells,\n    Cell,\n    Form,\n    FormCell,\n    CellHeader,\n    CellBody,\n    CellFooter,\n    Select,\n    ButtonArea,\n    Button\n} from '../react-qtui';\nimport {Dialog, DialogInput} from '../Dialog';\nimport * as groupCallBack from '../../actions/CallBack/group';\n\nexport default class DoGroup extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.shouldComponentUpdate = PureRenderMixin.shouldComponentUpdate.bind(this);\n        this.state = {\n            type: '',\n            color: '#333',\n            typeName: '',\n            user: [],\n            addUserData: {\n                name: '',\n                errMsg: '',\n                isInner: false\n            },\n            group: '1'\n        };\n    }\n\n    componentWillMount() {\n        this.state.type = this.props.type;\n        if (this.props.type === 'land') {\n            this.state.typeName = '陆地活动';\n            this.state.color = '#a76c0a';\n        } else {\n            this.state.typeName = '水上活动';\n            this.state.color = '#00ACDC';\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    hideDialog() {\n        console.log('hide');\n        this.setState({\n            showAddFiled: false,\n            addUserData: {\n                name: '',\n                errMsg: '',\n            },\n            errorMsgs: []\n        });\n    }\n\n    doAddFiled() {\n        const {addUserData, user} = this.state;\n        if (addUserData.name === '') {\n            this.setState({\n                addUserData: {\n                    ...this.state.addUserData,\n                    errMsg: '编号不能为空'\n                }\n            }, ()=>this.refs.dialogInput.focus());\n        } else {\n            if (user.indexOf(addUserData.name) === -1) {\n                user.push(addUserData.name);\n                this.setState({\n                    addUserData: {\n                        name: '',\n                        errMsg: '',\n                    },\n                    user: [...user]\n                }, ()=>this.refs.dialogInput.focus());\n            } else {\n                this.setState({\n                    addUserData: {\n                        ...this.state.addUserData,\n                        errMsg: '编号已存在'\n                    }\n                }, ()=>this.refs.dialogInput.focus());\n            }\n        }\n    }\n\n    addFiled = {\n        inputChange(event) {\n            this.setState({\n                addUserData: {\n                    ...this.state.addUserData,\n                    name: event.target.value,\n                    errMsg: ''\n                }\n            });\n        },\n\n        buttons: [\n            {\n                type: 'default',\n                label: '结束',\n                onClick: this.hideDialog.bind(this)\n            },\n            {\n                type: 'primary',\n                label: '下一个',\n                onClick: this.doAddFiled.bind(this)\n            }\n        ]\n    };\n\n    submit() {\n        const {group, user, type} = this.state;\n        groupCallBack.doGroup({\n            type,\n            group,\n            users: user\n        }).then(res => {\n            if (typeof res.json === 'function') {\n                return res.json();\n            }\n            return res;\n        }).then(data => {\n            console.log(data);\n            if (data.status !== 1) {\n                alert(data.message ? data.message : '分组失败，请重试');\n            } else {\n                let str = '以下魅友已被编入' + (data.type === 'water' ? '水上' : '陆地') + '第' + data.group + '组：\\r\\n' + data.user.join(',');\n                if (data.nu_user.length > 0) {\n                    str += '\\r\\n以下魅友已被分配在其他组：\\r\\n' + data.nu_user.join(',');\n                }\n                if (data.no_sign.length > 0) {\n                    str += '\\r\\n以下魅友还未签到：\\r\\n' + data.no_sign.join(',');\n                }\n                alert(str);\n                this.setState({\n                    user: []\n                });\n            }\n        });\n    }\n\n    render() {\n        const {typeName, color, user, addUserData, showAddFiled} = this.state;\n        return (\n            <div>\n                <div\n                    style={{textAlign: 'center', color: color, fontSize: '24px'}}>{typeName}</div>\n                <CellsTitle>组别</CellsTitle>\n                <Form>\n                    <FormCell select selectPos=\"after\">\n                        <CellBody>\n                            <Select onChange={e => this.setState({group: e.target.value})}>\n                                <option value=\"1\">第一组</option>\n                                <option value=\"2\">第二组</option>\n                                <option value=\"3\">第三组</option>\n                                <option value=\"4\">第四组</option>\n                            </Select>\n                        </CellBody>\n                    </FormCell>\n                </Form>\n                <CellsTitle>成员名单</CellsTitle>\n                <Cells>\n                    {\n                        user.map((item, index) => (\n                            <Cell key={index}>\n                                <CellBody>{item}</CellBody>\n                            </Cell>\n                        ))\n                    }\n\n                </Cells>\n                <ButtonArea>\n                    <Button\n                        type=\"default\"\n                        onClick={e => this.setState({showAddFiled: true}, ()=>this.refs.dialogInput.focus())}>\n                        添加成员\n                    </Button>\n                    <Button\n                        onClick={this.submit.bind(this)}>\n                        确认分组\n                    </Button>\n                </ButtonArea>\n                <Dialog title=\"输入魅友编号\" show={showAddFiled} buttons={this.addFiled.buttons}>\n                    <DialogInput ref=\"dialogInput\" placeholder=\"编号，例如01\" defaultValue={addUserData.name}\n                                 warn={!!addUserData.errMsg} type=\"number\"\n                                 desc={addUserData.errMsg} onChange={this.addFiled.inputChange.bind(this)}/>\n                </Dialog>\n            </div>\n        );\n    }\n}"]}